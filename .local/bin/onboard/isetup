#!/bin/sh

changeShell() {
  cat /etc/shells
  chsh --shell /bin/zsh razak
}

setupSsh() {
  if [[ -d "$HOME/.ssh" ]]; then
    chmod 600 ~/.ssh/id_rsa
    eval "$(ssh-agent -s)"
    ssh-add ~/.ssh/id_rsa
  fi
}

installOhmyzsh() {
  sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
  git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
  git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
  git clone https://github.com/agkozak/zsh-z $ZSH_CUSTOM/plugins/zsh-z
  git clone https://github.com/agkozak/zsh-z ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-z
  git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf && ~/.fzf/install
}

installPlugins() {
  mkdir -p ~/.config/zsh/plugins
  plugins=(
    # 'ohmyzsh/ohmyzsh/tree/master/plugins/copybuffer'
    # 'docker/cli/blob/master/contrib/completion/zsh'
    # 'ohmyzsh/ohmyzsh/tree/master/plugins/docker-compose'
    # 'ohmyzsh/ohmyzsh/tree/master/plugins/git'
    'djui/alias-tips'
    'zsh-users/zsh-autosuggestions'
    'zsh-users/zsh-completions'
    'zsh-users/zsh-syntax-highlighting'
    'agkozak/zsh-z'
  )
  # curl -sLo "https://github.com/$download_path" "$url"
  for i in ${plugins[@]}; do
    name=$(echo ${i} | sed 's|.*/||')
    if [[ -d "~/.config/zsh/plugins/${name}" ]]; then
      echo "dir ${name} already exists."
    else
      $(git clone https://github.com/$i ~/.config/zsh/plugins/$name)
    fi
  done
}

installTmuxPlugins() {
  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
  git clone https://github.com/tmux-plugins/tpm ~/.config/tmux     /plugins/tpm
}

installAsdf() {
  git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.8.0-rc1
}

# changeShell
# setupSsh
# installOhmyzsh
# installTmuxPlugins
installPlugins
