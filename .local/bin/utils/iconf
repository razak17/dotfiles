#!/bin/bash

CONF='/usr/bin/git --git-dir=$HOME/.dots/dotfiles/ --work-tree=$HOME'
NCONF='/usr/bin/git --git-dir=$HOME/.dots/$EDITOR/ --work-tree=$HOME/.config/$EDITOR'

confStatus() {
  eval "$CONF status"
}

confAdd() {
  eval "$CONF add ./**/*"
}

confCommit() {
  if [[ -z "$*" ]]; then
    echo "-n should have the next argument contain actual session"
    exit 1
  else
    message="$*"
    echo message: $message
    eval "$CONF commit -m '${message}'"
    exit 1
  fi
}

confCommitAll() {
  if [[ -z "$*" ]]; then
    echo "-n should have the next argument contain actual session"
    exit 1
  else
    message="$*"
    echo message: $message
    eval "$CONF commit -a -m '${message}'"
    exit 1
  fi
}

confPush() {
 eval "$CONF push"
}

nconfStatus() {
  eval "$NCONF status"
}

nconfAdd() {
  eval "$NCONF add ./*/**"
}

nconfCommit() {
  if [[ -z "$*" ]]; then
    echo "-n should have the next argument contain actual session"
    exit 1
  else
    message="$*"
    echo message: $message
    eval "$NCONF commit -m '${message}'"
    exit 1
  fi
}

nconfCommitAll() {
  if [[ -z "$*" ]]; then
    echo "-n should have the next argument contain actual session"
    exit 1
  else
    message="$*"
    echo message: $message
    eval "$NCONF commit -a -m '${message}'"
    exit 1
  fi
}

nconfPush() {
 eval "$NCONF push"
}


while [[ "$#" -gt 0 ]]; do
  curr=$1
  shift

  case "$curr" in
  "-cs")
    confStatus
    ;;
  "-csa")
    confAdd
    ;;
  "-ccom")
    confCommit "$*"
    ;;
  "-ccomall")
    confCommitAll "$*"
    ;;
  "-cp")
    confPush
    ;;
  "-ncs")
    nconfStatus
    ;;
  "-ncsa")
    nconfAdd
    ;;
  "-nccom")
    nconfCommit "$*"
    ;;
  "-nccomall")
    nconfCommitAll "$*"
    ;;
  "-ncp")
    nconfPush
  ;;
  *) echo "Unavailable command... $curr"
  esac
done
