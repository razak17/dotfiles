#!/bin/sh

if [ $# -gt 0 ]; then
	killall "$1"
else
	pid=$(ps -u "$USER" -o pid,%cpu,%mem,comm | sed -n '1!p' | sort -b -k3 -r | fzf | awk '{print $1}')

	if [ -n "$pid" ]; then
		kill "$pid"
	fi
fi

# Dmenu

# mem=$(free -h | sed -n '2p' | awk '{print $3}' | cut -d'.' -f 1)

# cmds="\
# kill
# keep"

# if [ "$mem" -gt 1 ]; then
# 	pid=$(ps -u "$USER" -o pid,%mem | sort -b -k 2 -r | sed -n '1!p' | head -n 1 | awk '{print $1}')
#
# 	choice=$(echo "$cmds" | cut -d'	' -f2- | dmenu -l 10 -p "Kill process $pid?") || exit 1
# 	if [ "$choice" = "kill" ]; then
# 		echo "horrrrrrray"
# 		# kill -9 "$pid"
# 	fi
# fi
