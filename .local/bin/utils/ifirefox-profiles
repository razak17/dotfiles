#!/usr/bin/env bash

profiles=("coding" "dev" "main" "rec" "test" "userjs")
profiles_path="$HOME/.mozilla/firefox/profiles"

capitalize() {
	word="$1"
	echo "$(tr '[:lower:]' '[:upper:]' <<<"${word:0:1}")${word:1}"
}

cd "$profiles_path" || exit
choice="$(dir | xargs -n 1 -P 1 echo "$0" | awk '{print $2}' | dmenu -l 10)"
echo "$choice"

if [ -z "$choice" ]; then
	notify-send -u critical -t 2000 "Firefox Profiles" "nothing selected!"
	exit 0
fi

for p in "${profiles[@]}"; do
	if [ "$choice" = "$p" ]; then
		profile=$(capitalize "$p")
		notify-send -t 2000 "Firefox profiles" "Opening $profile profile..."
		firefox -P "$profile"
	else
		notify-send -u critical -t 2000 "Firefox Profiles" "That profile does not exist"
		exit 0
	fi
done
