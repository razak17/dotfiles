#!/usr/bin/env bash

profiles_path="$HOME/.mozilla/firefox/profiles"

capitalize() {
	word="$1"
	echo "$(tr '[:lower:]' '[:upper:]' <<<"${word:0:1}")${word:1}"
}

cd "$profiles_path" || exit
choice="$(dir | xargs -n 1 -P 1 echo "$0" | awk '{print $2}' | dmenu -l 10 -p 'Choose :')"
echo "$choice"

if [ -z "$choice" ]; then
	# notify-send -u critical -t 2000 "Firefox Profiles" "nothing selected!"
	exit 1
fi

if [ -n "$choice" ]; then
	profile=$(capitalize "$choice")
	notify-send -t 2000 "Firefox profiles" "Opening $choice profile..."
	firefox -P "$profile"
else
	notify-send -u critical -t 2000 "Firefox Profiles" "That profile does not exist"
fi
