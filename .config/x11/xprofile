#!/bin/sh

/usr/bin/xmodmap -e "clear mod5"
/usr/bin/xmodmap -e "keycode 108 = Alt_L"

# Executed by startx (run your window manager from here)
if [ -d /etc/X11/xinit/xinitrc.d ]; then
	for f in /etc/X11/xinit/xinitrc.d/*; do
		[ -x "$f" ] && . "$f"
	done
	unset f
fi

# XDG directories
export XDG_CONFIG_HOME="$HOME/.config"
export XDG_CACHE_HOME="$HOME/.cache"
export XDG_DATA_HOME="$HOME/.local/share"
export DEV_HOME="$HOME/personal/workspace/coding"
export RVIM_RUNTIME_DIR="$HOME/.local/share/rvim"
export RVIM_CONFIG_DIR="$HOME/.config/rvim"
export RVIM_CACHE_DIR="$HOME/.cache/rvim"

export EDITOR="rvim"
export VISUAL="rvim"
export SUDO_EDITOR="nvim"
export BROWSER="firefox"
export TERMINAL="alacritty"

# zsh config dir
export ZDOTDIR=$HOME/.config/zsh

dwmblocks &
~/.local/bin/dwm/setbg &
~/.local/bin/utils/itouch &
~/.local/bin/utils/ikeyboard &
~/.local/bin/utils/ibrightness &
picom &
autokey-gtk &

# This line autostarts an instance of Pulseaudio that does not exit on idle.
# This is "necessary" on Artix due to a current bug between PA and
# Chromium-based browsers where they fail to start PA and use dummy output.
# pidof -s runit &&
# ! pidof -s pulseaudio >/dev/null 2>&1 &&
# setsid -f pulseaudio --start --exit-idle-time=-1 >/dev/null 2>&1
