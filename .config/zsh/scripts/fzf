#!/bin/bash

# find files
#   fd -t file --hidden --exclude .git --exclude .github --search-path . | fzf --reverse --border=rounded --height 20 | xargs -r nvim
ff() {
	ws="$HOME/personal/workspace"
	selected=$(find "$ws"/coding "$ws"/rgt ~/.dots ~/.config ~/.local/share/rvim/lazy -mindepth 1 -maxdepth 2 -type d | fzf --no-sort)
	if [ -z "$selected" ]; then
		return
	fi
	# selected_name="$(basename "$selected" | tr . _)"
	cd "$selected" || exit
	rvim --no-lsp --no-treesitter
	cd - || return
}

# Only show files which have $1 present in contents
fw() {
	line=$(rg "$1" | fzf) &&
		v --minimal $(cut -d':' -f1 <<<"$line") +$(cut -d':' -f2 <<<"$line")
}

# zd - use zoxide & FZF to find and go to directory
# Not sure why zoxide query -i with FZF doesn't CD
zd() {
	dir=$(zoxide query -l | fzf)

	if [ -n "$dir" ]; then
		cd "$dir" || exit
	fi
}

# see environment variables
envs() {
	# ps eww -o command | tr ' ' '\n'
	printenv | fzf
}

scr() {
	pushd "$HOME/Pictures/screenshots" >/dev/null || return
	if exists ranger; then
		ranger
	fi
	cd - || return
}

# todos() {
#   cd "$HOME/notes/neorg" || return
#   file="$(find . -type f | sort | fzf)"
# 	if [ -n $file ]; then
# 		rvim --minimal "$file"
# 	fi
#   cd - || return
# }
