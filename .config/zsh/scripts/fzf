#!/bin/sh

# find files
ff() {
  file="$(find . -type f | sort | fzf)"
	if [[ -n $file ]]; then
		rvim --minimal $file
	fi
}

# Only show files which have $1 present in contents
fw() {
  local line
  line=$(rg "$1" | fzf) &&
    $EDITOR $(cut -d':' -f1 <<<"$line") +$(cut -d':' -f2 <<<"$line")
}

# zd - use zoxide & FZF to find and go to directory
# Not sure why zoxide query -i with FZF doesn't CD
zd() {
	dir=$(zoxide query -l | fzf)

	if [[ -n $dir ]]; then
		cd $dir || exit
	fi
}

# see environment variables
envs() {
	# ps eww -o command | tr ' ' '\n'
	printenv | fzf
}

txkall() {
	server="Dev"
  tmux -L $server list-sessions | grep -E -v '\(attached\)$' | while IFS='\n' read line; do
    tmux -L $server kill-session -t "${line%%:*}"
  done
}

scr() {
  pushd "$HOME/Pictures/screenshots" > /dev/null || return
  if [[ $+commands[ranger] ]]; then
    ranger
  fi
  cd - || return
}

todos() {
  cd "$HOME/notes/neorg" || return
  file="$(find . -type f | sort | fzf)"
	if [[ -n $file ]]; then
		rvim --minimal $file
	fi
  cd - || return
}
